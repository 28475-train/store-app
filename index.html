<!DOCTYPE html>
<html lang="ja">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>åº—èˆ—ã‚¢ãƒ—ãƒª | ãƒ­ã‚°ã‚¤ãƒ³ï¼†ç™»éŒ²</title>

<style>
body { font-family: sans-serif; margin: 20px; }
.box { max-width: 350px; margin:auto; padding: 20px; border-radius:10px;
       box-shadow:0 0 10px #ccc; }
input,button {
    width:100%; padding:10px; margin-top:10px; font-size:16px;
    border-radius:6px; border:1px solid #bbb;
}
button{background:black;color:white;}
h2{text-align:center;}
</style>
</head>
<body>

<div class="box">

<h2>ğŸ” ãƒ­ã‚°ã‚¤ãƒ³</h2>
<input id="phone_login" placeholder="é›»è©±ç•ªå·">
<input id="pass_login"  placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" type="password">
<button onclick="login()">ãƒ­ã‚°ã‚¤ãƒ³</button>

<hr>

<h2>ğŸ“ æ–°è¦ç™»éŒ²</h2>
<input id="name_reg"  placeholder="åå‰">
<input id="phone_reg" placeholder="é›»è©±ç•ªå·">
<input id="pass_reg"  placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" type="password">
<button onclick="register()">ç™»éŒ²</button>

<p id="msg"></p>

</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbwkt98UPOTm1IIjc-T9Rv8J3I1_9ygTZ2ThqGF-OZ5eaaHXWRb0g6ngOOL1mWgHZx0h/exec";

async function register(){
 let data = {
  name:document.getElementById("name_reg").value,
  phone:document.getElementById("phone_reg").value,
  pass:document.getElementById("pass_reg").value
 };
 let res = await fetch(API,{
   method:"POST",
   body:JSON.stringify(data)
 });
 let r = await res.json();
 document.getElementById("msg").innerText = "ç™»éŒ²å®Œäº†ï¼ ä¼šå“¡IDâ†’ " + r.userId;
}

async function login(){
 let data = {
  phone:document.getElementById("phone_login").value,
  pass: document.getElementById("pass_login").value
 };

 let res = await fetch(API+"?login=1",{
   method:"POST",
   body:JSON.stringify(data)
 });

 document.getElementById("msg").innerText="ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ä¸­...";
 let r = await res.json();

 if(r.status==="LOGIN_OK"){
   document.getElementById("msg").innerHTML=
     "ãƒ­ã‚°ã‚¤ãƒ³æˆåŠŸğŸ‰<br>ã‚ãªãŸã®ãƒã‚¤ãƒ³ãƒˆï¼š" + r.point;
 }else{
   document.getElementById("msg").innerText="ãƒ­ã‚°ã‚¤ãƒ³å¤±æ•—";
 }
}
</script>
</body>
</html>
